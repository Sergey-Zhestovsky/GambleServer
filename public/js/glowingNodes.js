"use strict";window.GlowingNodes=function(i){var t,s,d,c,n,o,e,r,h,a,l,v,g,y=0;t=i.wrapper,s=i.canvas;var u=i.nodeConnectionDistance;d=void 0===u?100:u;var w=i.sublingLimit;c=void 0===w?10:w;var m=i.nodeMargin;n=void 0===m?65:m;var f=i.nodeMaxSpread;o=void 0===f?50:f;var b=i.visionRadious;e=void 0===b?300:b;var x=i.nodeSpeed;r=void 0===x?550:x;var M=i.colorScheme;h=void 0===M?{node:"8, 6, 34",connection:"8, 6, 34"}:M;var p,Y=i.initialPosition;function P(i,t){this.anchorX=i,this.anchorY=t,this.x=Math.random()*(i-(i-o))+(i-o),this.y=Math.random()*(t-(t-o))+(t-o),this.vx=2*Math.random()-1,this.vy=2*Math.random()-1,this.energy=100*Math.random(),this.radius=Math.random(),this.siblings=[],this.brightness=0}function S(i,t){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}function N(){s.width=window.innerWidth,s.height=window.innerHeight}function q(i){g.x=i.clientX,g.y=i.clientY+window.scrollY}initialPosition=void 0===Y?{}:Y,t=document.querySelector(t),s=document.querySelector(s),l=2*Math.PI,v=[],N(),g={x:initialPosition.x||void 0,y:initialPosition.y||void 0},a=s.getContext("2d"),P.prototype.drawNode=function(){var i="rgba(".concat(h.node,", ")+this.brightness+")";a.beginPath(),a.arc(this.x,this.y,2*this.radius+2*this.siblings.length/c,0,l),a.fillStyle=i,a.fill()},P.prototype.drawConnections=function(){for(var i=0;i<this.siblings.length;i++){var t=S(this,this.siblings[i]);if(!(d<t)){var n="rgba(".concat(h.connection,", ")+this.brightness+")";a.beginPath(),a.moveTo(this.x,this.y),a.lineTo(this.siblings[i].x,this.siblings[i].y),a.lineWidth=1-t/d,a.strokeStyle=n,a.stroke()}}},P.prototype.moveNode=function(){this.energy-=1,this.energy<1&&(this.energy=100*Math.random(),this.x-this.anchorX<-o?this.vx=2*Math.random():this.x-this.anchorX>o?this.vx=-2*Math.random():this.vx=4*Math.random()-2,this.y-this.anchorY<-o?this.vy=2*Math.random():this.y-this.anchorY>o?this.vy=-2*Math.random():this.vy=4*Math.random()-2),this.x+=this.vx*this.energy/r,this.y+=this.vy*this.energy/r},p=0,document.addEventListener("resize",N,!1),t.addEventListener("mousemove",q,!1),document.addEventListener("scroll",function(i){0!=p&&p!=window.scrollY&&(g.y+=window.scrollY-p),p=window.scrollY},!0),function(){a.clearRect(0,0,s.width,s.height),v=[];for(var i=n;i<s.width;i+=n)for(var t=n;t<s.height;t+=n)v.push(new P(i,t)),y++}(),function i(){var t,n,o;for(N(),a.clearRect(0,0,s.width,s.height),function(){for(var i,t,n,o=0;o<y;o++){(i=v[o]).siblings=[];for(var s=0;s<y;s++)if(i!==(t=v[s])&&(n=S(i,t))<d)if(i.siblings.length<c)i.siblings.push(t);else{for(var e,r=0,h=0,a=0;a<c;a++)h<(r=S(i,i.siblings[a]))&&(h=r,e=a);n<h&&(i.siblings.splice(e,1),i.siblings.push(t))}}}(),t=0;t<y;t++)n=v[t],o=S({x:g.x,y:g.y},n),n.brightness=o<e?1-o/e:0;for(t=0;t<y;t++)(n=v[t]).brightness&&(n.drawNode(),n.drawConnections()),n.moveNode();requestAnimationFrame(i)}()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2dsb3dpbmdOb2Rlcy5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJHbG93aW5nTm9kZXMiLCJvcHRpb25zIiwid3JhcHBlciIsImNhbnZhcyIsIlNFTlNJVElWSVRZIiwiU0lCTElOR1NfTElNSVQiLCJERU5TSVRZIiwiQU5DSE9SX0xFTkdUSCIsIk1PVVNFX1JBRElVUyIsIlNQRUVEIiwiY2lyYyIsIm5vZGVzIiwibW91c2UiLCJOT0RFU19RVFkiLCJfb3B0aW9ucyRub2RlQ29ubmVjdGkiLCJfb3B0aW9ucyRzdWJsaW5nTGltaXQiLCJfb3B0aW9ucyRub2RlTWFyZ2luIiwiX29wdGlvbnMkbm9kZU1heFNwcmVhIiwiY29sb3JTY2hlbWUiLCJfb3B0aW9ucyR2aXNpb25SYWRpb3UiLCJ2aXNpb25SYWRpb3VzIiwiX29wdGlvbnMkbm9kZVNwZWVkIiwibm9kZVNwZWVkIiwiX29wdGlvbnMkY29sb3JTY2hlbWUiLCJub2RlIiwiY29ubmVjdGlvbiIsIl9vcHRpb25zJGluaXRpYWxQb3NpdCIsImluaXRpYWxQb3NpdGlvbiIsIk5vZGUiLCJ4IiwieSIsInRoaXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJNYXRoIiwiUEkiLCJyYW5kb20iLCJ2eCIsInJlc2l6ZVdpbmRvdyIsInZ5IiwiZW5lcmd5IiwidW5kZWZpbmVkIiwiYnJpZ2h0bmVzcyIsImNhbGNEaXN0YW5jZSIsIm5vZGUxIiwibm9kZTIiLCJzcXJ0IiwicG93IiwiaW5uZXJXaWR0aCIsImRyYXdOb2RlIiwiaW5uZXJIZWlnaHQiLCJtb3VzZW1vdmVIYW5kbGVyIiwiZSIsIm1vdmVOb2RlIiwiY2xpZW50WCIsImNsaWVudFkiLCJzY3JvbGxZIiwibm9kZUNvbm5lY3Rpb25EaXN0YW5jZSIsIm5vZGVNYXJnaW4iLCJnZXRDb250ZXh0IiwiYW5jaG9yWCIsImNvbmNhdCIsImFuY2hvclkiLCJjdHgiLCJzaWJsaW5ncyIsImNvbG9yIiwicmFkaXVzIiwiaSIsImxlbmd0aCIsImRpc3QiLCJiZWdpblBhdGgiLCJmaWxsU3R5bGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJsaW5lV2lkdGgiLCJwcm90b3R5cGUiLCJkcmF3Q29ubmVjdGlvbnMiLCJzdHJva2UiLCJzdHJva2VTdHlsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXN0YW5jZSIsImxhc3RTY3JvbGxlZCIsIndpZHRoIiwiaGVpZ2h0IiwiaiIsImluaXROb2RlcyIsInJlZHJhd1NjZW5lIiwibm9kZV9zaWJsaW5nX2Rpc3RhbmNlIiwibWF4X2Rpc3RhbmNlIiwicHVzaCIsInMiLCJrIiwic3BsaWNlIiwiZmluZFNpYmxpbmdzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiYUFDSUEsT0FBT0MsYUFBZSxTQUFzQkMsR0FEaEQsSUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFHWUMsRUFIVkMsRUFBV0MsRUFBQUMsRUFDRlQsRUFDVUcsRUFBYk8sRUFBQUMsRUFBQUMsRUFDYUMsRUFBWSxFQUR6QlgsRUFVNEJFLEVBVHhCRSxRQUFxQkgsRUFTR0MsRUFUZlMsT0FGb0MsSUFBQUMsRUFXckJWLEVBUnhCRyx1QkFGSkgsT0FEaUQsSUFBQVUsRUFDakQsSUFEaURBLEVBQUEsSUFBQUMsRUFXckJYLEVBUlRJLGFBRm5CSCxPQURpRCxJQUFBVSxFQUNqRCxHQURpREEsRUFBQSxJQUFBQyxFQVdyQlosRUFSS0ssV0FGakNILE9BRGlELElBQUFVLEVBQ2pELEdBRGlEQSxFQUFBLElBQUFDLEVBV3JCYixFQVB4QmMsY0FISlgsT0FEaUQsSUFBQVUsRUFDakQsR0FEaURBLEVBQUEsSUFBQUUsRUFXckJmLEVBTDVCZ0IsY0FBc0JSLE9BTjJCLElBQUFPLEVBTWpELElBTmlEQSxFQUFBLElBQUFFLEVBV3JCakIsRUFYcUJrQixVQVM3Q3BCLE9BVDZDLElBQUFtQixFQUFBLElBQUFBLEVBQUEsSUFBQUUsRUFXckJuQixFQVhxQmMsWUFVN0NmLE9BVjZDLElBQUFvQixFQUFBLENBQUFDLEtBQUEsV0FBQUMsV0FBQSxZQUFBRixFQUFBLElB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b0IsR0FDdkJ2RSxJQUFTLElBQUF1RSxFQUFBLEVBQUFBLEVBQUF2RSxFQUFBdUUsSUFFaEIsR0FBQXhDLEtBRElDLEVBQUFsQyxFQUFBeUUsTUFFUkosRUFBQXJDLEVBQUFDLEVBQUFDLElBZThCekMsRUFiVHdDLEdBQXRCQSxFQUFBb0IsU0FBb0NJLE9BQUEvRCxFQUNOdUMsRUFBTWYsU0FBUzRELEtBQXhCNUMsT0FDcEIsQ0FrQnVCLElBSEEsSUFacEI2QyxFQVl3QkgsRUFBd0IsRUFiNUJDLEVBQUEsRUFnQlNHLEVBQUksRUFBR0EsRUFBSXRGLEVBQWdCc0YsSUFicERILEdBREpELEVBQW9DNUMsRUFBQUMsRUFBQUEsRUFBQW9CLFNBQUEyQixPQUVoQ0gsRUFBQUQsRUFnQndCRyxFQUFJQyxHQUdSWCxFQUFXUSxJQWhCTjVDLEVBQUFvQixTQUFBNEIsT0FBQUYsRUFBQSxHQUNPOUMsRUFBRG9CLFNBQXZCeUIsS0FBQTVDLE1BNkJaZ0QsR0FsQjRCTCxFQUFBQSxFQUFBQSxFQUFBQSxFQUFlRCxJQUNmRyxFQUFDL0UsRUFBRHdELEdBRVBhLEVBQUFyQyxFQUFBLENBcUJiZCxFQUFHakIsRUFBTWlCLEVBcEJPbUQsRUFBQUEsRUFBUWxELEdBQ1JjLEdBR1BwQixFQUFBa0IsV0FESXNDLEVBQUF4RSxFQUNKLEVBQUF3RSxFQUFBeEUsRUFFUixFQUdaLElBQUEyRCxFQUFBLEVBQUFBLEVBQUF0RCxFQUFBc0QsS0FzQk8zQyxFQUFPYixFQUFNd0QsSUFwQnJCekIsYUFDZ0JsQixFQUFBeUIsV0FDRXpCLEVBQWRvRCxtQkFFT3BELEVBQU13RCxXQUNQYyxzQkFBc0JSLEdBeUJoQ0EiLCJmaWxlIjoianMvZ2xvd2luZ05vZGVzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy5HbG93aW5nTm9kZXMgPSBmdW5jdGlvbiBHbG93aW5nTm9kZXMob3B0aW9ucykge1xyXG4gICAgICAgIGxldCB3cmFwcGVyLCBjYW52YXMsIFNFTlNJVElWSVRZLCBTSUJMSU5HU19MSU1JVCxcclxuICAgICAgICAgICAgREVOU0lUWSwgTk9ERVNfUVRZID0gMCxcclxuICAgICAgICAgICAgQU5DSE9SX0xFTkdUSCwgTU9VU0VfUkFESVVTLCBTUEVFRCxcclxuICAgICAgICAgICAgY29sb3JTY2hlbWU7XHJcblxyXG4gICAgICAgIGxldCBjdHgsIGNpcmMsIG5vZGVzLCBtb3VzZTtcclxuXHJcbiAgICAgICAgKHtcclxuICAgICAgICAgICAgd3JhcHBlcjogd3JhcHBlcixcclxuICAgICAgICAgICAgY2FudmFzOiBjYW52YXMsXHJcbiAgICAgICAgICAgIG5vZGVDb25uZWN0aW9uRGlzdGFuY2U6IFNFTlNJVElWSVRZID0gMTAwLFxyXG4gICAgICAgICAgICBzdWJsaW5nTGltaXQ6IFNJQkxJTkdTX0xJTUlUID0gMTAsXHJcbiAgICAgICAgICAgIG5vZGVNYXJnaW46IERFTlNJVFkgPSA2NSxcclxuICAgICAgICAgICAgbm9kZU1heFNwcmVhZDogQU5DSE9SX0xFTkdUSCA9IDUwLFxyXG4gICAgICAgICAgICB2aXNpb25SYWRpb3VzOiBNT1VTRV9SQURJVVMgPSAzMDAsXHJcbiAgICAgICAgICAgIG5vZGVTcGVlZDogU1BFRUQgPSA1NTAsXHJcbiAgICAgICAgICAgIGNvbG9yU2NoZW1lOiBjb2xvclNjaGVtZSA9IHsgbm9kZTogYDgsIDYsIDM0YCwgY29ubmVjdGlvbjogYDgsIDYsIDM0YCB9LFxyXG4gICAgICAgICAgICBpbml0aWFsUG9zaXRpb246IGluaXRpYWxQb3NpdGlvbiA9IHt9XHJcbiAgICAgICAgfSA9IG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih3cmFwcGVyKTtcclxuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhbnZhcyk7XHJcblxyXG4gICAgICAgIGNpcmMgPSAyICogTWF0aC5QSTtcclxuICAgICAgICBub2RlcyA9IFtdO1xyXG5cclxuICAgICAgICByZXNpemVXaW5kb3coKTtcclxuXHJcbiAgICAgICAgbW91c2UgPSB7XHJcbiAgICAgICAgICAgIHg6IGluaXRpYWxQb3NpdGlvbi54IHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgeTogaW5pdGlhbFBvc2l0aW9uLnkgfHwgdW5kZWZpbmVkXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gTm9kZSh4LCB5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWCA9IHg7XHJcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yWSA9IHk7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IE1hdGgucmFuZG9tKCkgKiAoeCAtICh4IC0gQU5DSE9SX0xFTkdUSCkpICsgKHggLSBBTkNIT1JfTEVOR1RIKTtcclxuICAgICAgICAgICAgdGhpcy55ID0gTWF0aC5yYW5kb20oKSAqICh5IC0gKHkgLSBBTkNIT1JfTEVOR1RIKSkgKyAoeSAtIEFOQ0hPUl9MRU5HVEgpO1xyXG4gICAgICAgICAgICB0aGlzLnZ4ID0gTWF0aC5yYW5kb20oKSAqIDIgLSAxO1xyXG4gICAgICAgICAgICB0aGlzLnZ5ID0gTWF0aC5yYW5kb20oKSAqIDIgLSAxO1xyXG4gICAgICAgICAgICB0aGlzLmVuZXJneSA9IE1hdGgucmFuZG9tKCkgKiAxMDA7XHJcbiAgICAgICAgICAgIHRoaXMucmFkaXVzID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgdGhpcy5zaWJsaW5ncyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmJyaWdodG5lc3MgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTm9kZS5wcm90b3R5cGUuZHJhd05vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGNvbG9yID0gYHJnYmEoJHtjb2xvclNjaGVtZS5ub2RlfSwgYCArIHRoaXMuYnJpZ2h0bmVzcyArIFwiKVwiO1xyXG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGN0eC5hcmModGhpcy54LCB0aGlzLnksIDIgKiB0aGlzLnJhZGl1cyArIDIgKiB0aGlzLnNpYmxpbmdzLmxlbmd0aCAvIFNJQkxJTkdTX0xJTUlULCAwLCBjaXJjKTtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIE5vZGUucHJvdG90eXBlLmRyYXdDb25uZWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2libGluZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBkaXN0ID0gY2FsY0Rpc3RhbmNlKHRoaXMsIHRoaXMuc2libGluZ3NbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXN0ID4gU0VOU0lUSVZJVFkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gYHJnYmEoJHtjb2xvclNjaGVtZS5jb25uZWN0aW9ufSwgYCArIHRoaXMuYnJpZ2h0bmVzcyArIFwiKVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8odGhpcy54LCB0aGlzLnkpO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh0aGlzLnNpYmxpbmdzW2ldLngsIHRoaXMuc2libGluZ3NbaV0ueSk7XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMSAtIGRpc3QgLyBTRU5TSVRJVklUWTtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgTm9kZS5wcm90b3R5cGUubW92ZU5vZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5lbmVyZ3kgLT0gMTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZW5lcmd5IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbmVyZ3kgPSBNYXRoLnJhbmRvbSgpICogMTAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueCAtIHRoaXMuYW5jaG9yWCA8IC1BTkNIT1JfTEVOR1RIKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52eCA9IE1hdGgucmFuZG9tKCkgKiAyO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnggLSB0aGlzLmFuY2hvclggPiBBTkNIT1JfTEVOR1RIKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52eCA9IE1hdGgucmFuZG9tKCkgKiAtMjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52eCA9IE1hdGgucmFuZG9tKCkgKiA0IC0gMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnkgLSB0aGlzLmFuY2hvclkgPCAtQU5DSE9SX0xFTkdUSCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnkgPSBNYXRoLnJhbmRvbSgpICogMjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy55IC0gdGhpcy5hbmNob3JZID4gQU5DSE9SX0xFTkdUSCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnkgPSBNYXRoLnJhbmRvbSgpICogLTI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnkgPSBNYXRoLnJhbmRvbSgpICogNCAtIDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy54ICs9IHRoaXMudnggKiB0aGlzLmVuZXJneSAvIFNQRUVEO1xyXG4gICAgICAgICAgICB0aGlzLnkgKz0gdGhpcy52eSAqIHRoaXMuZW5lcmd5IC8gU1BFRUQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdE5vZGVzKCkge1xyXG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIG5vZGVzID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBERU5TSVRZOyBpIDwgY2FudmFzLndpZHRoOyBpICs9IERFTlNJVFkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBERU5TSVRZOyBqIDwgY2FudmFzLmhlaWdodDsgaiArPSBERU5TSVRZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZXMucHVzaChuZXcgTm9kZShpLCBqKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTk9ERVNfUVRZKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhbGNEaXN0YW5jZShub2RlMSwgbm9kZTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhub2RlMS54IC0gbm9kZTIueCwgMikgKyAoTWF0aC5wb3cobm9kZTEueSAtIG5vZGUyLnksIDIpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5kU2libGluZ3MoKSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlMSwgbm9kZTIsIGRpc3RhbmNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE5PREVTX1FUWTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlMSA9IG5vZGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgbm9kZTEuc2libGluZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgTk9ERVNfUVRZOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlMiA9IG5vZGVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlMSAhPT0gbm9kZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBjYWxjRGlzdGFuY2Uobm9kZTEsIG5vZGUyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgU0VOU0lUSVZJVFkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlMS5zaWJsaW5ncy5sZW5ndGggPCBTSUJMSU5HU19MSU1JVCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUxLnNpYmxpbmdzLnB1c2gobm9kZTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZV9zaWJsaW5nX2Rpc3RhbmNlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4X2Rpc3RhbmNlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IFNJQkxJTkdTX0xJTUlUOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZV9zaWJsaW5nX2Rpc3RhbmNlID0gY2FsY0Rpc3RhbmNlKG5vZGUxLCBub2RlMS5zaWJsaW5nc1trXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlX3NpYmxpbmdfZGlzdGFuY2UgPiBtYXhfZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heF9kaXN0YW5jZSA9IG5vZGVfc2libGluZ19kaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IG1heF9kaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlMS5zaWJsaW5ncy5zcGxpY2UocywgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUxLnNpYmxpbmdzLnB1c2gobm9kZTIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVkcmF3U2NlbmUoKSB7XHJcbiAgICAgICAgICAgIHJlc2l6ZVdpbmRvdygpO1xyXG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgICAgIGZpbmRTaWJsaW5ncygpO1xyXG4gICAgICAgICAgICB2YXIgaSwgbm9kZSwgZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBOT0RFU19RVFk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGVzW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gY2FsY0Rpc3RhbmNlKHtcclxuICAgICAgICAgICAgICAgICAgICB4OiBtb3VzZS54LFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IG1vdXNlLnlcclxuICAgICAgICAgICAgICAgIH0sIG5vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IE1PVVNFX1JBRElVUykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuYnJpZ2h0bmVzcyA9IDEgLSBkaXN0YW5jZSAvIE1PVVNFX1JBRElVUztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5icmlnaHRuZXNzID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgTk9ERVNfUVRZOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2Rlc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmJyaWdodG5lc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmRyYXdOb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5kcmF3Q29ubmVjdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5vZGUubW92ZU5vZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVkcmF3U2NlbmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdEhhbmRsZXJzKCkge1xyXG4gICAgICAgICAgICBsZXQgbGFzdFNjcm9sbGVkID0gMDtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZVdpbmRvdywgZmFsc2UpO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlbW92ZUhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFNjcm9sbGVkICE9IDAgJiYgbGFzdFNjcm9sbGVkICE9IHdpbmRvdy5zY3JvbGxZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW91c2UueSArPSB3aW5kb3cuc2Nyb2xsWSAtIGxhc3RTY3JvbGxlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxhc3RTY3JvbGxlZCA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgICAgICAgICB9LCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZVdpbmRvdygpIHtcclxuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBtb3VzZW1vdmVIYW5kbGVyKGUpIHtcclxuICAgICAgICAgICAgbW91c2UueCA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgbW91c2UueSA9IGUuY2xpZW50WSArIHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdEhhbmRsZXJzKCk7XHJcbiAgICAgICAgaW5pdE5vZGVzKCk7XHJcbiAgICAgICAgcmVkcmF3U2NlbmUoKTtcclxuXHJcbiAgICB9XHJcbn0pKCk7Il19

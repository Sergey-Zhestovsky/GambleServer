"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var customdropDownSelector=function(){function n(e){var t=e.block,s=e.activeClass,i=void 0===s?"active":s,a=e.dataStep,l=e.keyStep;_classCallCheck(this,n),this.block=t,this.activeClass=i,this.styledSelect=t.find(".select-styled"),this.list=t.find(".select-options"),this.selectedData,this.subscribeStack=new Set,this.dataStep=a,this.keyStep=l,this.create()}return _createClass(n,[{key:"create",value:function(){var c=this;this.dataStep&&(this.generateList(),this.list.find("li").each(function(){this.val=$(this).attr("val")}),""==this.styledSelect.text()&&this.setDefault(),this.styledSelect.click(function(e){c.isOpen()||(c.open(),$(document).one("click",function(){$(document).one("click",function(){c.close()})}))}),this.list.on("click","li",function(e){var t=e.target;if(t.val!==c.getSetValue()){c.getSetValue(t.val,t.textContent),c.selectedData=t.val;var s=!0,i=!1,a=void 0;try{for(var l,n=c.subscribeStack[Symbol.iterator]();!(s=(l=n.next()).done);s=!0){(0,l.value)(c.selectedData)}}catch(e){i=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}}}))}},{key:"setDefault",value:function(){var e=this.list.find("li").get(0);this.getSetValue(e.val,e.textContent)}},{key:"generateList",value:function(){for(var e="",t=0;t<this.dataStep.length;t++)e+='<li val="'.concat(this.keyStep?this.keyStep[t]:this.dataStep[t],'">').concat(this.dataStep[t],"</li>");this.list.html(e)}},{key:"close",value:function(){this.styledSelect.removeClass(this.activeClass),this.list.addClass("hide")}},{key:"open",value:function(){this.styledSelect.addClass(this.activeClass),this.list.removeClass("hide")}},{key:"isOpen",value:function(){return this.styledSelect.hasClass("active")}},{key:"getSetValue",value:function(e,t){if(!e||!t)return this.selectedData;this.selectedData=e,this.styledSelect.text(t)}},{key:"subscribe",value:function(e){this.subscribeStack.add(e)}},{key:"unsubscribe",value:function(e){this.subscribeStack.delete(e)}}]),n}();exports.default=customdropDownSelector;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZS9jdXN0b21TZWxlY3Rvci5qcyJdLCJuYW1lcyI6WyJjdXN0b21kcm9wRG93blNlbGVjdG9yIiwiX3JlZiIsImJsb2NrIiwiX3JlZiRhY3RpdmVDbGFzcyIsImFjdGl2ZUNsYXNzIiwiZGF0YVN0ZXAiLCJrZXlTdGVwIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInN0eWxlZFNlbGVjdCIsImZpbmQiLCJsaXN0Iiwic2VsZWN0ZWREYXRhIiwic3Vic2NyaWJlU3RhY2siLCJTZXQiLCJjcmVhdGUiLCJfdGhpcyIsImVhY2giLCJ2YWwiLCIkIiwiYXR0ciIsImNsaWNrIiwiZSIsIm9wZW4iLCJkb2N1bWVudCIsIm9uZSIsImNsb3NlIiwiY3VycmVudCIsImdldFNldFZhbHVlIiwidGV4dENvbnRlbnQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwidmFsdWUiLCJlcnIiLCJfaXRlcmF0b3IiLCJyZXR1cm4iLCJ0YXJnZXQiLCJnZXQiLCJmaXJzdCIsImh0bWwiLCJpIiwibGVuZ3RoIiwiY29uY2F0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwia2V5IiwiY2IiLCJhZGQiLCJkZWxldGUiXSwibWFwcGluZ3MiOiJBQUFBLHFlQUVxQkEsa0NBRWpCLFNBQUFBLEVBQUFDLEdBQWlFLElBQW5EQyxFQUFtREQsRUFBbkRDLE1BQW1EQyxFQUFBRixFQUE1Q0csWUFBQUEsT0FBNEMsSUFBQUQsRUFBOUIsU0FBOEJBLEVBQXBCRSxFQUFvQkosRUFBcEJJLFNBQVVDLEVBQVVMLEVBQVZLLFFBQVVDLGdCQUFBQyxLQUFBUixHQUM3RFEsS0FBS04sTUFBUUEsRUFDYk0sS0FBS0osWUFBY0EsRUFDbkJJLEtBQUtDLGFBQWVQLEVBQU1RLEtBQUssa0JBQy9CRixLQUFLRyxLQUFPVCxFQUFNUSxLQUFLLG1CQUN2QkYsS0FBS0ksYUFDTEosS0FBS0ssZUFBaUIsSUFBSUMsSUFDMUJOLEtBQUtILFNBQVdBLEVBQ2hCRyxLQUFLRixRQUFVQSxFQUVmRSxLQUFLTywrREFWd0QsSUFBQUMsRUFBQVIsS0FBQUEsS0FBQUgsV0FBVkMsS0FBQUEsZUFBVUUsS0FBQUcsS0FBQUQsS0FBQSxNQUFBTyxLQUFBLFdBb0J6RFQsS0FBS1UsSUFBTUMsRUFBRVgsTUFBTVksS0FBSyxTQWpCRyxJQUExQlgsS0FBQUEsYUFBcUJDLFFBQ3JCQyxLQUFPVCxhQUVaTSxLQUFLSyxhQUFpQlEsTUFBSVAsU0FBSlEsR0FDakJqQixFQUFXQSxXQUluQlcsRUFBQU8sT0FxQk9KLEVBQUVLLFVBQVVDLElBQUksUUFBUyxXQUNyQk4sRUFBRUssVUFBVUMsSUFBSSxRQUFTLFdBQ3JCVCxFQUFLVSxlQWZqQmxCLEtBQUtHLEtBQUtELEdBQUssUUFBTU8sS0FBSyxTQUFBSyxHQUN0QixJQUFBSyxFQUFXTCxFQUFRRixPQUduQixHQUFLWCxFQUFBQSxNQUFMTyxFQUFBWSxjQUFBLENBc0JBWixFQUFLWSxZQUFZRCxFQUFRVCxJQUFLUyxFQUFRRSxhQWZ0Q2IsRUFBS08sYUFBTEksRUFBQVQsSUFYc0IsSUFBQVksR0FBQSxFQUFBQyxHQUFBLEVBQUFDLE9BQUFDLEVBQUEsSUFhcEJULElBQUFBLElBQUFBLEVBQUFBLEVBQWNSLEVBQWhCSCxlQUFFVyxPQUFBQSxjQUFBQSxHQUFBQSxFQUFBQSxFQUFBQSxRQUFBQSxNQUFBQSxHQUFBQSxFQUE2QixFQUN6QkEsRUFEeUJVLEVBQUFDLE9BQ3pCWCxFQUFVQyxlQWRNLE1BQUFXLEdBQUFMLEdBQUEsRUFBQUMsRUFBQUksRUFBQSxRQUFBLElBQUFOLEdBQUEsTUFBQU8sRUFBQUMsUUFBQUQsRUFBQUMsU0FBQSxRQUFBLEdBQUFQLEVBQUEsTUFBQUMsNkNBcUJ0QixJQUFJTCxFQUFPbkIsS0FBSytCLEtBQWhCN0IsS0FBQSxNQUFBOEIsSUFBQSxHQWlCSmhDLEtBQUtvQixZQUFZYSxFQUFNdkIsSUFBS3VCLEVBQU1aLG9EQWxCQyxJQUFBLElBQUFhLEVBQUEsR0FBQUMsRUFBQSxFQUFBQSxFQUFBbkMsS0FBQUgsU0FBQXVDLE9BQUFELElBeUIvQkQsR0FBSSxZQUFBRyxPQUFpQnJDLEtBQUtGLFFBQVVFLEtBQUtGLFFBQVFxQyxHQUFLbkMsS0FBS0gsU0FBU3NDLEdBQWhFLE1BQUFFLE9BQXdFckMsS0FBS0gsU0FBU3NDLEdBQXRGLFNBaEJnQ25DLEtBQUFHLEtBQUErQixLQUFBQSxtQ0FUTGxDLEtBQUFDLGFBQUFxQyxZQUFBdEMsS0FBQUosYUFBQUksS0FBQUcsS0FBQW9DLFNBQUEsdUNBQUF2QyxLQUFBQyxhQUFBc0MsU0FBQXZDLEtBQUFKLGFBQUFJLEtBQUFHLEtBQUFtQyxZQUFBLHlDQUFBLE9BQUF0QyxLQUFBQyxhQUFBdUMsU0FBQSw4Q0FBbkNDLEVBQUFkLEdBYUgsSUFBQWMsSUFBQWQsRUFrQ08sT0FBTzNCLEtBQUtJLGFBRWhCSixLQUFLSSxhQUFlcUMsRUFqQ3BCekMsS0FBSWlDLGFBQWE5QixLQUFLRCxxQ0FxQ2hCd0MsR0FDTjFDLEtBQUtLLGVBQWVzQyxJQUFJRCx1Q0FHaEJBLEdBakNSMUMsS0FBS0ssZUFBZXVDLE9BQUsvQyIsImZpbGUiOiJqcy9tb2R1bGUvY3VzdG9tU2VsZWN0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBjdXN0b21kcm9wRG93blNlbGVjdG9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7IGJsb2NrLCBhY3RpdmVDbGFzcyA9IFwiYWN0aXZlXCIsIGRhdGFTdGVwLCBrZXlTdGVwfSkge1xyXG4gICAgICAgIHRoaXMuYmxvY2sgPSBibG9jaztcclxuICAgICAgICB0aGlzLmFjdGl2ZUNsYXNzID0gYWN0aXZlQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5zdHlsZWRTZWxlY3QgPSBibG9jay5maW5kKCcuc2VsZWN0LXN0eWxlZCcpO1xyXG4gICAgICAgIHRoaXMubGlzdCA9IGJsb2NrLmZpbmQoJy5zZWxlY3Qtb3B0aW9ucycpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXRhO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlU3RhY2sgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5kYXRhU3RlcCA9IGRhdGFTdGVwO1xyXG4gICAgICAgIHRoaXMua2V5U3RlcCA9IGtleVN0ZXA7XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kYXRhU3RlcClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmdlbmVyYXRlTGlzdCgpO1xyXG5cclxuICAgICAgICB0aGlzLmxpc3QuZmluZChcImxpXCIpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsID0gJCh0aGlzKS5hdHRyKFwidmFsXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdHlsZWRTZWxlY3QudGV4dCgpID09IFwiXCIpXHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnN0eWxlZFNlbGVjdC5jbGljaygoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc09wZW4oKSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xyXG5cclxuICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5saXN0Lm9uKFwiY2xpY2tcIiwgXCJsaVwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudCA9IGUudGFyZ2V0O1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQudmFsID09PSB0aGlzLmdldFNldFZhbHVlKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmdldFNldFZhbHVlKGN1cnJlbnQudmFsLCBjdXJyZW50LnRleHRDb250ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEgPSBjdXJyZW50LnZhbDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNiIG9mIHRoaXMuc3Vic2NyaWJlU3RhY2spIHtcclxuICAgICAgICAgICAgICAgIGNiKHRoaXMuc2VsZWN0ZWREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlZmF1bHQoKSB7XHJcbiAgICAgICAgbGV0IGZpcnN0ID0gdGhpcy5saXN0LmZpbmQoXCJsaVwiKS5nZXQoMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5nZXRTZXRWYWx1ZShmaXJzdC52YWwsIGZpcnN0LnRleHRDb250ZW50KVxyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlTGlzdCgpIHtcclxuICAgICAgICBsZXQgaHRtbCA9ICcnO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YVN0ZXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaHRtbCArPSBgPGxpIHZhbD1cIiR7IHRoaXMua2V5U3RlcCA/IHRoaXMua2V5U3RlcFtpXSA6IHRoaXMuZGF0YVN0ZXBbaV0gfVwiPiR7dGhpcy5kYXRhU3RlcFtpXX08L2xpPmBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubGlzdC5odG1sKGh0bWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc3R5bGVkU2VsZWN0LnJlbW92ZUNsYXNzKHRoaXMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMubGlzdC5hZGRDbGFzcyhcImhpZGVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLnN0eWxlZFNlbGVjdC5hZGRDbGFzcyh0aGlzLmFjdGl2ZUNsYXNzKTtcclxuICAgICAgICB0aGlzLmxpc3QucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzT3BlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZWRTZWxlY3QuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNldFZhbHVlKGtleSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIWtleSB8fCAhdmFsdWUpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkRGF0YTtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZERhdGEgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5zdHlsZWRTZWxlY3QudGV4dCh2YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlKGNiKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVTdGFjay5hZGQoY2IpO1xyXG4gICAgfVxyXG5cclxuICAgIHVuc3Vic2NyaWJlKGNiKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVTdGFjay5kZWxldGUoY2IpO1xyXG4gICAgfVxyXG59Il19

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _customSelector=_interopRequireDefault(require("/js/module/customSelector.js")),_deviceSettingSlider=_interopRequireDefault(require("/js/module/deviceSettingSlider.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(n)throw o}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var PopupForm=function(){function f(e){var t=e.title,r=e.block,i=e.validate,n=e.behavior,o=e.succes,a=e.schema,l=void 0===a?[]:a,c=e.relatedData,s=e.nestedElements,u=e.connector;_classCallCheck(this,f),this.title=t,this.block=r,this.validate=!(!i||!i.func)&&i,this.behavior=n,this.succes=o,this.schema=l,this.relatedData=c,this.nestedElements=s,this.connector=u,this.formStack=[],this.initialObject,this.createForm()}return _createClass(f,[{key:"createForm",value:function(){var e=this.schema||[];if(this.behavior)for(var t=Object.keys(this.behavior),r=0;r<t.length;r++){var i=t[r],n=this.behavior[i];n.schema&&(e=e.concat(n.schema))}if(this.nestedElements){this.createNestedForm();var o=!0,a=!1,l=void 0;try{for(var c,s=this.nestedElements[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.schema&&(e=e.concat(u.schema))}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}var f,h,v=!0,d=!1,m=void 0;try{for(var y,k=e[Symbol.iterator]();!(v=(y=k.next()).done);v=!0){var p=y.value;switch(p.type){case"select":b(p,this.relatedData);break;case"slider":h=this,(f=p).slider=new _deviceSettingSlider.default({block:$(f.field),dataSchema:f.dataSchema,schema:f.schema,parentForm:h,onAdd:f.onAdd})}}}catch(e){d=!0,m=e}finally{try{v||null==k.return||k.return()}finally{if(d)throw m}}function b(e,t){var r=[],i=[],n=!0,o=!1,a=void 0;try{for(var l,c=t[e.name][Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;r.push(s[e.selectorConfig.key]),i.push(s[e.selectorConfig.value])}}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}e.selector=new _customSelector.default({block:$(e.field),dataStep:i,keyStep:r})}}},{key:"open",value:function(e,t){var r,i,n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,a=this.behavior&&this.behavior[e].schema?this.behavior[e].schema:this.schema;switch(e){case"add":break;case"edit":this.openEdit(t,a),n=t,this.initialObject=t;break;default:return o("unknown action")}r=this.behavior?$(this.behavior[e].block):null,i=this.behavior?this.behavior[e].succes:this.succes,this.formStack.push({currentBlock:r,succesCallBack:o,initialObject:n,currentSchema:a}),this.show(),this.setEvent("close"),this.setEvent("close",this.block.find(".popup-form_header-close i")),this.setEvent("succes",this.block.find(i))}},{key:"openEdit",value:function(e,t){e=JSON.parse(JSON.stringify(e));var r=!0,i=!1,n=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;c(l.type,$(l.field),e[l.name],l)}}catch(e){i=!0,n=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw n}}function c(e,t,r,i){switch(e){case"input":t.val(r);break;case"select":i.selector.getSetValue(r[i.selectorConfig.key],r[i.selectorConfig.value]);break;case"text":t.text(function(e,t){if(!t||!Array.isArray(t))return e;var r=e,i=!0,n=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;r=r[c]||""}}catch(e){n=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(n)throw o}}return r}(r,i.source));break;case"slider":i.slider.setData(r)}}}},{key:"show",value:function(){this.form.currentBlock&&(this.form.currentBlock.show(),this.form.currentBlock.parent().show()),this.block.addClass("show-block")}},{key:"hide",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};this.block.removeClass("show-block"),setTimeout(e,125)}},{key:"clear",value:function(){if(this.form){var e=!0,t=!1,r=void 0;try{for(var i,n=this.form.currentSchema[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var o=i.value;a(o.type,$(o.field),o)}}catch(e){t=!0,r=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}this.validate&&this.removeErrors(),this.closeBlockInStack()}function a(e,t,r){switch(e){case"input":t.val("");break;case"select":r.selector.setDefault();break;case"text":t.text("");break;case"slider":r.slider.clear()}}}},{key:"clearAll",value:function(){for(;0!=this.formStack.length;)this.clear();this.initialObject=void 0}},{key:"setEvent",value:function(e,t){var u,f=this,h=new Map,r=function(e){var s,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:f.block,r=(s=e,function(e){if(e.delegateTarget===e.target){if("succes"==s&&!f.submit())return;if(u){var t=!0,r=!1,i=void 0;try{for(var n,o=h[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=_slicedToArray(n.value,2),l=a[0],c=a[1];l.off("click",c)}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}h.clear(),f.hide(function(){f.clearAll()}),u=!1}}});u=!0,h.set(t,r),t.on("click",r)};(this.setEvent=r)(e,t)}},{key:"submit",value:function(){var e,t=this.getObject(this.form.initialObject),r={};if(this.form.initialObject&&function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,r=2<arguments.length?arguments[2]:void 0,i=!0,n=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;switch(s.type){case"input":i&=e[s.name]==t[s.name];break;case"select":i&=e[s.name]&&e[s.name][s.selectorConfig.key]==t[s.name];break;case"slider":i&=JSON.stringify(e[s.name])===JSON.stringify(t[s.name])}}}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return i}(this.form.initialObject,t,this.form.currentSchema))return!0;var i=!0,n=!1,o=void 0;try{for(var a,l=this.form.currentSchema[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;c.validation&&(r[c.name]=c.validation)}}catch(e){n=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(n)throw o}}if(this.validate){if(e=(new this.validate.func).validate(t,r),0!=Object.keys(e))return this.errorHandler(e),!1;this.form.succesCallBack(null,t)}else this.form.succesCallBack(null,t);return!0}},{key:"getObject",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e)),r=!0,i=!1,n=void 0;try{for(var o,a=this.form.currentSchema[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value,c=s(l.type,$(l.field),l);void 0!==c&&(t[l.name]=c)}}catch(e){i=!0,n=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw n}}return t;function s(e,t,r){switch(e){case"input":return t.val();case"select":return r.selector.getSetValue();case"slider":return r.slider.getData()}}}},{key:"errorHandler",value:function(e){var t=!0,r=!1,i=void 0;try{for(var n,o=this.form.currentSchema[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var a=n.value;e[a.name]?this.setError($(a.field),$(a.field).siblings(".popup-form_error-block"),a.type):this.removeError($(a.field),$(a.field).siblings(".popup-form_error-block"),a.type)}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"setError",value:function(e,t,r){e.addClass("popup-form_error"),t.addClass("show-block")}},{key:"removeError",value:function(e,t,r){e.removeClass("popup-form_error"),t.removeClass("show-block")}},{key:"removeErrors",value:function(){var e=!0,t=!1,r=void 0;try{for(var i,n=this.form.currentSchema[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var o=i.value;this.removeError($(o.field),$(o.field).siblings(".popup-form_error-block"),o.type)}}catch(e){t=!0,r=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}}},{key:"createNestedForm",value:function(){var r=this,e=!0,t=!1,i=void 0;try{for(var n,o=function(){var e=n.value;e.DOM={},e.DOM.block=$(e.block),e.DOM.container=e.DOM.block.parent();var t=$('\n\t\t\t<div class="popup-form_nested-container-header">\n\t            <div class="popup-form_nested-container-back" data-action="return">\n\t                <i class="fa fa-arrow-left" aria-hidden="true"></i>\n\t            </div>\n\t            <div class="popup-form_nested-container-header-title"></div>\n\t        </div>');e.DOM.container.prepend(t),e.DOM.return=t.find("div[data-action='return']"),e.DOM.title=t.find(".popup-form_nested-container-header-title"),e.DOM.loading=e.DOM.block.find(".popup-form_body-container-wrapper-loading"),e.DOM.succes=$(e.succes),e.DOM.succes.on("click",function(){r.form.currentBlock===e.DOM&&r.submit()})},a=this.nestedElements[Symbol.iterator]();!(e=(n=a.next()).done);e=!0)o()}catch(e){t=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}}},{key:"openNestedElement",value:function(e){var r,t,i=this,n=e.nestedElement,o=n.id,a=n.title,l=e.serverRequest,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},s=function(e){r&&r.cancel(),i.form.currentBlock.closeFunction=void 0,i.form.currentBlock.loading.removeClass("active"),e&&i.clear()},u=function(e,t){e||(s(!0),c(e,t))},f=!0,h=!1,v=void 0;try{for(var d,m=this.nestedElements[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var y=d.value;y.id===o&&(t=y)}}catch(e){h=!0,v=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw v}}t&&(t.DOM.title.text(a),t.DOM.closeFunction=s,this.formStack.push({currentBlock:t.DOM,succesCallBack:l?function(e,t){e||(i.form.currentBlock.loading.addClass("active"),r=i.connector.customEventRequest(l.eventName,{objectId:i.initialObject._id,createdObject:t},u))}:u,currentSchema:t.schema}),this.showNestedElement(),t.DOM.return.one("click",s))}},{key:"showNestedElement",value:function(){var e=this.form.currentBlock.container,t=this.previousForm.currentBlock.container?this.previousForm.currentBlock.container:this.previousForm.currentBlock.parent();t.addClass("hide"),e.show(),setTimeout(function(){t.hide()},500)}},{key:"hideNestedElement",value:function(){var e=this.form.currentBlock.container,t=this.previousForm.currentBlock.container?this.previousForm.currentBlock.container:this.previousForm.currentBlock.parent();t.show(),setTimeout(function(){t.removeClass("hide")},0),setTimeout(function(){e.hide()},500)}},{key:"closeNestedElement",value:function(){this.form.currentBlock&&this.form.currentBlock.container?this.hideNestedElement():this.form.currentBlock&&this.form.currentBlock.hide(),this.formStack.pop()}},{key:"closeBlockInStack",value:function(){this.form.currentBlock&&this.form.currentBlock.closeFunction&&(this.form.currentBlock.closeFunction(),this.form.currentBlock.return.off("click",this.form.currentBlock.closeFunction)),this.closeNestedElement()}},{key:"form",get:function(){return this.formStack[this.formStack.length-1]}},{key:"previousForm",get:function(){return this.formStack[this.formStack.length-2]}}]),f}();exports.default=PopupForm;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL21vZHVsZS9wb3B1cEZvcm0uanMiXSwibmFtZXMiOlsiX2N1c3RvbVNlbGVjdG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZGV2aWNlU2V0dGluZ1NsaWRlciIsIlBvcHVwRm9ybSIsIl9yZWYiLCJ0aXRsZSIsImJsb2NrIiwidmFsaWRhdGUiLCJiZWhhdmlvciIsInN1Y2NlcyIsIl9yZWYkc2NoZW1hIiwic2NoZW1hIiwicmVsYXRlZERhdGEiLCJuZXN0ZWRFbGVtZW50cyIsImNvbm5lY3RvciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJmdW5jIiwiZm9ybVN0YWNrIiwiaW5pdGlhbE9iamVjdCIsImNyZWF0ZUZvcm0iLCJnbG9iYWxTY2hlbWEiLCJrZXlzIiwiT2JqZWN0IiwiX2kiLCJsZW5ndGgiLCJiZWhhdmlvck9iaiIsImNvbmNhdCIsImNyZWF0ZU5lc3RlZEZvcm0iLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInZhbHVlIiwib2JqZWN0IiwiZXJyIiwicmV0dXJuIiwic2NoZW1hRmllbGQiLCJjb250ZXh0IiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIiLCJfZGlkSXRlcmF0b3JFcnJvcjIiLCJfaXRlcmF0b3JFcnJvcjIiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwiY3JlYXRlU2VsZWN0RmllbGQiLCJmaWVsZCIsInNsaWRlciIsIkRldmljZVNldHRpbmdTbGlkZXIiLCIkIiwiZGF0YVNjaGVtYSIsInBhcmVudEZvcm0iLCJvbkFkZCIsImtleVN0ZXAiLCJkYXRhU3RlcCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwiX2RpZEl0ZXJhdG9yRXJyb3IzIiwiX2l0ZXJhdG9yRXJyb3IzIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsInNvdXJjZSIsIm5hbWUiLCJkYXRhIiwicHVzaCIsImtleSIsInNlbGVjdG9yIiwiQ3VzdG9tRHJvcERvd25TZWxlY3RvciIsImFjdGlvbiIsImN1cnJlbnRCbG9jayIsImNiIiwiYXJndW1lbnRzIiwiY3VycmVudFNjaGVtYSIsIm9wZW5FZGl0Iiwic3VjY2VzQ2FsbEJhY2siLCJjcmVhdGVTbGlkZXIiLCJzaG93Iiwic2V0RXZlbnQiLCJmaW5kIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQiLCJfZGlkSXRlcmF0b3JFcnJvcjQiLCJfaXRlcmF0b3JFcnJvcjQiLCJfc3RlcDQiLCJfaXRlcmF0b3I0IiwiZmlsbEZpZWxkIiwidHlwZSIsInZhbCIsImdldFNldFZhbHVlIiwic2VsZWN0b3JDb25maWciLCJ0ZXh0IiwicGF0aCIsIkFycmF5IiwiaXNBcnJheSIsInJlc3VsdCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241IiwiX2RpZEl0ZXJhdG9yRXJyb3I1IiwiX2l0ZXJhdG9yRXJyb3I1IiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNSIsImVsIiwiZ2V0UmVsYXRlZERhdGEiLCJzZXREYXRhIiwiYWRkQ2xhc3MiLCJmb3JtIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYiLCJfZGlkSXRlcmF0b3JFcnJvcjYiLCJfaXRlcmF0b3JFcnJvcjYiLCJfc3RlcDYiLCJfaXRlcmF0b3I2IiwiY2xlYXJGaWVsZCIsInJlbW92ZUVycm9ycyIsImNsb3NlQmxvY2tJblN0YWNrIiwic2V0RGVmYXVsdCIsImNsZWFyIiwic3RhdGUiLCJ0YXJnZXQiLCJfdGhpcyIsImV2ZW50TGlzdCIsIk1hcCIsInRlbXAiLCJlIiwiZGVsZWdhdGVUYXJnZXQiLCJzdWJtaXQiLCJhY3RpdmVTdGF0ZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243IiwiX2RpZEl0ZXJhdG9yRXJyb3I3IiwiX2l0ZXJhdG9yRXJyb3I3IiwiX3N0ZXA3IiwiX2l0ZXJhdG9yNyIsIl9zdGVwNyR2YWx1ZSIsIl9zbGljZWRUb0FycmF5Iiwib2ZmIiwiaGlkZSIsImNsZWFyQWxsIiwic2V0IiwiZ2V0T2JqZWN0Iiwib3B0aW9ucyIsIm1haW5PYmplY3QiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uOSIsIl9kaWRJdGVyYXRvckVycm9yOSIsIl9pdGVyYXRvckVycm9yOSIsIl9zdGVwOSIsIl9pdGVyYXRvcjkiLCJlcXVhbGl0eU9mT2JqZWN0cyIsIm9iaiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb244IiwiX2RpZEl0ZXJhdG9yRXJyb3I4IiwiX2l0ZXJhdG9yRXJyb3I4IiwiX3N0ZXA4IiwiX2l0ZXJhdG9yOCIsInZhbGlkYXRpb24iLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMTAiLCJfZGlkSXRlcmF0b3JFcnJvcjEwIiwiX2l0ZXJhdG9yRXJyb3IxMCIsIl9zdGVwMTAiLCJfaXRlcmF0b3IxMCIsInJlbW92ZUNsYXNzIiwic2V0VGltZW91dCIsImRlbGF5IiwiZ2V0RmllbGQiLCJnZXREYXRhIiwiZXJyb3IiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMTEiLCJfZGlkSXRlcmF0b3JFcnJvcjExIiwiX2l0ZXJhdG9yRXJyb3IxMSIsIl9zdGVwMTEiLCJfaXRlcmF0b3IxMSIsInNldEVycm9yIiwic2libGluZ3MiLCJyZW1vdmVFcnJvciIsImVycm9yQmxvY2siLCJfc3RlcDEyIiwiX2l0ZXJhdG9yMTIiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMTIiLCJfdGhpczIiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMTMiLCJfZGlkSXRlcmF0b3JFcnJvcjEzIiwiX2l0ZXJhdG9yRXJyb3IxMyIsIl9zdGVwMTMiLCJfbG9vcCIsImVsZW1lbnQiLCJET00iLCJjb250YWluZXIiLCJwYXJlbnQiLCJoZWFkZXIiLCJwcmVwZW5kIiwibG9hZGluZyIsIm9uIiwiY2xvc2UiLCJfaXRlcmF0b3IxMyIsInJlcXVlc3RPYmplY3QiLCJfdGhpczMiLCJfcmVmMiRuZXN0ZWRFbGVtZW50IiwiX3JlZjIiLCJuZXN0ZWRFbGVtZW50IiwiaWQiLCJzZXJ2ZXJSZXF1ZXN0IiwiaW5pdGlhbENCIiwiY2FuY2VsIiwiY2xvc2VGdW5jdGlvbiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24xNCIsIl9kaWRJdGVyYXRvckVycm9yMTQiLCJfaXRlcmF0b3JFcnJvcjE0IiwiX3N0ZXAxNCIsIl9pdGVyYXRvcjE0IiwiY3VzdG9tRXZlbnRSZXF1ZXN0IiwiZXZlbnROYW1lIiwib2JqZWN0SWQiLCJfaWQiLCJjcmVhdGVkT2JqZWN0Iiwic2hvd05lc3RlZEVsZW1lbnQiLCJvbmUiLCJjdXJyZW50IiwicHJldmlvdXNGb3JtIiwiaGlkZU5lc3RlZEVsZW1lbnQiLCJlcnJvckhhbmRsZXIiLCJwb3AiLCJjbG9zZU5lc3RlZEVsZW1lbnQiXSwibWFwcGluZ3MiOiJBQUFBLDJGQUVBLElBQUFBLGdCQUFBQyx1QkFBQUMsUUFBQSxpQ0FDQUMscUJBQUFGLHVCQUFBQyxRQUFBLGtnQ0FFcUJFLHFCQUNwQixTQUFBQSxFQUFBQyxHQUE2RyxJQUFoR0MsRUFBZ0dELEVBQWhHQyxNQUFPQyxFQUF5RkYsRUFBekZFLE1BQU9DLEVBQWtGSCxFQUFsRkcsU0FBVUMsRUFBd0VKLEVBQXhFSSxTQUFVQyxFQUE4REwsRUFBOURLLE9BQThEQyxFQUFBTixFQUF0RE8sT0FBQUEsT0FBc0QsSUFBQUQsRUFBN0MsR0FBNkNBLEVBQXpDRSxFQUF5Q1IsRUFBekNRLFlBQWFDLEVBQTRCVCxFQUE1QlMsZUFBZ0JDLEVBQVlWLEVBQVpVLFVBQVlDLGdCQUFBQyxLQUFBYixHQUo5R2EsS0FBQVgsTUFBQUEsRUFNRVcsS0FBS1YsTUFBUUEsRUFMZlUsS0FBQVQsWUFBQUEsSUFBQUEsRUFBQVUsT0FBQVYsRUFPRVMsS0FBS1IsU0FBV0EsRUFDaEJRLEtBQUtQLE9BQVNBLEVBQ2RPLEtBQUtMLE9BQVNBLEVBQ2RLLEtBQUtKLFlBQWNBLEVBQ25CSSxLQUFLSCxlQUFpQkEsRUFDdEJHLEtBQUtGLFVBQVlBLEVB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clxuaW1wb3J0IEN1c3RvbURyb3BEb3duU2VsZWN0b3IgZnJvbSAnL2pzL21vZHVsZS9jdXN0b21TZWxlY3Rvci5qcyc7XHJcbmltcG9ydCBEZXZpY2VTZXR0aW5nU2xpZGVyIGZyb20gJy9qcy9tb2R1bGUvZGV2aWNlU2V0dGluZ1NsaWRlci5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cEZvcm0ge1xyXG5cdGNvbnN0cnVjdG9yKHt0aXRsZSwgYmxvY2ssIHZhbGlkYXRlLCBiZWhhdmlvciwgc3VjY2VzLCBzY2hlbWEgPSBbXSwgcmVsYXRlZERhdGEsIG5lc3RlZEVsZW1lbnRzLCBjb25uZWN0b3J9KSB7XHJcblx0XHR0aGlzLnRpdGxlID0gdGl0bGU7XHJcblx0XHR0aGlzLmJsb2NrID0gYmxvY2s7XHJcblx0XHR0aGlzLnZhbGlkYXRlID0gKHZhbGlkYXRlICYmIHZhbGlkYXRlLmZ1bmMpID8gdmFsaWRhdGUgOiBmYWxzZTtcclxuXHRcdHRoaXMuYmVoYXZpb3IgPSBiZWhhdmlvcjtcclxuXHRcdHRoaXMuc3VjY2VzID0gc3VjY2VzO1xyXG5cdFx0dGhpcy5zY2hlbWEgPSBzY2hlbWE7XHJcblx0XHR0aGlzLnJlbGF0ZWREYXRhID0gcmVsYXRlZERhdGE7XHJcblx0XHR0aGlzLm5lc3RlZEVsZW1lbnRzID0gbmVzdGVkRWxlbWVudHM7XHJcblx0XHR0aGlzLmNvbm5lY3RvciA9IGNvbm5lY3RvcjtcclxuXHJcblx0XHR0aGlzLmZvcm1TdGFjayA9IFtdO1xyXG5cdFx0dGhpcy5pbml0aWFsT2JqZWN0O1xyXG5cclxuXHRcdHRoaXMuY3JlYXRlRm9ybSgpO1xyXG5cdH1cclxuXHJcblx0Z2V0IGZvcm0oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5mb3JtU3RhY2tbdGhpcy5mb3JtU3RhY2subGVuZ3RoIC0gMV07XHJcblx0fVxyXG5cclxuXHRnZXQgcHJldmlvdXNGb3JtKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZm9ybVN0YWNrW3RoaXMuZm9ybVN0YWNrLmxlbmd0aCAtIDJdO1xyXG5cdH1cclxuXHJcblx0Y3JlYXRlRm9ybSgpIHtcclxuXHRcdGxldCBnbG9iYWxTY2hlbWEgPSB0aGlzLnNjaGVtYSB8fCBbXTtcclxuXHJcblx0XHRpZiAodGhpcy5iZWhhdmlvcikge1xyXG5cdFx0XHRsZXQga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuYmVoYXZpb3IpO1xyXG5cclxuXHRcdFx0Zm9yKGxldCBrZXkgb2Yga2V5cykge1xyXG5cdFx0XHRcdGxldCBiZWhhdmlvck9iaiA9IHRoaXMuYmVoYXZpb3Jba2V5XTtcclxuXHJcblx0XHRcdFx0YmVoYXZpb3JPYmouc2NoZW1hICYmIChnbG9iYWxTY2hlbWEgPSBnbG9iYWxTY2hlbWEuY29uY2F0KGJlaGF2aW9yT2JqLnNjaGVtYSkpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5uZXN0ZWRFbGVtZW50cykge1xyXG5cdFx0XHR0aGlzLmNyZWF0ZU5lc3RlZEZvcm0oKTtcclxuXHJcblx0XHRcdGZvcihsZXQgb2JqZWN0IG9mIHRoaXMubmVzdGVkRWxlbWVudHMpIHtcclxuXHRcdFx0XHRvYmplY3Quc2NoZW1hICYmIChnbG9iYWxTY2hlbWEgPSBnbG9iYWxTY2hlbWEuY29uY2F0KG9iamVjdC5zY2hlbWEpKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yKGxldCBmaWVsZCBvZiBnbG9iYWxTY2hlbWEpXHJcblx0XHRcdHN3aXRjaCAoZmllbGQudHlwZSkge1xyXG5cdFx0XHRcdGNhc2UgXCJzZWxlY3RcIjpcclxuXHRcdFx0XHRcdGNyZWF0ZVNlbGVjdEZpZWxkKGZpZWxkLCB0aGlzLnJlbGF0ZWREYXRhKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJzbGlkZXJcIjpcclxuXHRcdFx0XHRcdGNyZWF0ZVNsaWRlcihmaWVsZCwgdGhpcyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBjcmVhdGVTZWxlY3RGaWVsZChzY2hlbWFGaWVsZCwgc291cmNlKSB7XHJcblx0XHRcdGxldCBrZXlTdGVwID0gW10sIGRhdGFTdGVwID0gW107XHJcblxyXG5cdFx0XHRmb3IobGV0IGRhdGEgb2Ygc291cmNlW3NjaGVtYUZpZWxkLm5hbWVdKSB7XHJcblx0XHRcdFx0a2V5U3RlcC5wdXNoKCBkYXRhW3NjaGVtYUZpZWxkLnNlbGVjdG9yQ29uZmlnLmtleV0gKTtcclxuXHRcdFx0XHRkYXRhU3RlcC5wdXNoKCBkYXRhW3NjaGVtYUZpZWxkLnNlbGVjdG9yQ29uZmlnLnZhbHVlXSApO1x0XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNjaGVtYUZpZWxkLnNlbGVjdG9yID0gbmV3IEN1c3RvbURyb3BEb3duU2VsZWN0b3Ioe1xyXG5cdFx0XHRcdGJsb2NrOiAkKHNjaGVtYUZpZWxkLmZpZWxkKSxcclxuXHRcdFx0XHRkYXRhU3RlcCxcclxuXHRcdFx0XHRrZXlTdGVwXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGNyZWF0ZVNsaWRlcihzY2hlbWFGaWVsZCwgY29udGV4dCkge1xyXG5cdFx0XHRzY2hlbWFGaWVsZC5zbGlkZXIgPSBuZXcgRGV2aWNlU2V0dGluZ1NsaWRlcih7XHJcblx0XHRcdFx0YmxvY2s6ICQoc2NoZW1hRmllbGQuZmllbGQpLFxyXG5cdFx0XHRcdGRhdGFTY2hlbWE6IHNjaGVtYUZpZWxkLmRhdGFTY2hlbWEsXHJcblx0XHRcdFx0c2NoZW1hOiBzY2hlbWFGaWVsZC5zY2hlbWEsXHJcblx0XHRcdFx0cGFyZW50Rm9ybTogY29udGV4dCxcclxuXHRcdFx0XHRvbkFkZDogc2NoZW1hRmllbGQub25BZGRcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvcGVuKGFjdGlvbiwgb2JqZWN0LCBjYiA9IG9iamVjdCkge1xyXG5cdFx0bGV0IGN1cnJlbnRCbG9jaywgc3VjY2VzLCBpbml0aWFsT2JqZWN0LFxyXG5cdFx0XHRjdXJyZW50U2NoZW1hID0gKHRoaXMuYmVoYXZpb3IgJiYgdGhpcy5iZWhhdmlvclthY3Rpb25dLnNjaGVtYSlcclxuXHRcdFx0XHQ/IHRoaXMuYmVoYXZpb3JbYWN0aW9uXS5zY2hlbWEgXHJcblx0XHRcdFx0OiB0aGlzLnNjaGVtYTtcclxuXHJcblx0XHRzd2l0Y2ggKGFjdGlvbikge1xyXG5cdFx0XHRjYXNlIFwiYWRkXCI6XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgXCJlZGl0XCI6XHJcblx0XHRcdFx0dGhpcy5vcGVuRWRpdChvYmplY3QsIGN1cnJlbnRTY2hlbWEpO1xyXG5cdFx0XHRcdGluaXRpYWxPYmplY3QgPSBvYmplY3Q7XHJcblx0XHRcdFx0dGhpcy5pbml0aWFsT2JqZWN0ID0gb2JqZWN0O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiBjYihcInVua25vd24gYWN0aW9uXCIpXHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0Y3VycmVudEJsb2NrID0gdGhpcy5iZWhhdmlvciA/ICQodGhpcy5iZWhhdmlvclthY3Rpb25dLmJsb2NrKSA6IG51bGw7XHJcblx0XHRzdWNjZXMgPSB0aGlzLmJlaGF2aW9yID8gdGhpcy5iZWhhdmlvclthY3Rpb25dLnN1Y2NlcyA6IHRoaXMuc3VjY2VzO1xyXG5cdFx0dGhpcy5mb3JtU3RhY2sucHVzaCh7XHJcblx0XHRcdGN1cnJlbnRCbG9jayxcclxuXHRcdFx0c3VjY2VzQ2FsbEJhY2s6IGNiLFxyXG5cdFx0XHRpbml0aWFsT2JqZWN0LFxyXG5cdFx0XHRjdXJyZW50U2NoZW1hXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnNob3coKTtcclxuXHRcdHRoaXMuc2V0RXZlbnQoXCJjbG9zZVwiKTtcclxuXHRcdHRoaXMuc2V0RXZlbnQoXCJjbG9zZVwiLCB0aGlzLmJsb2NrLmZpbmQoXCIucG9wdXAtZm9ybV9oZWFkZXItY2xvc2UgaVwiKSk7XHJcblx0XHR0aGlzLnNldEV2ZW50KFwic3VjY2VzXCIsIHRoaXMuYmxvY2suZmluZChzdWNjZXMpKTtcclxuXHR9XHJcblxyXG5cdG9wZW5FZGl0KG9iamVjdCwgY3VycmVudFNjaGVtYSkge1xyXG5cdFx0b2JqZWN0ID0gSlNPTi5wYXJzZSggSlNPTi5zdHJpbmdpZnkob2JqZWN0KSApO1xyXG5cclxuXHRcdGZvcihsZXQgdmFsdWUgb2YgY3VycmVudFNjaGVtYSkge1xyXG5cdFx0XHRmaWxsRmllbGQodmFsdWUudHlwZSwgJCh2YWx1ZS5maWVsZCksIG9iamVjdFt2YWx1ZS5uYW1lXSwgdmFsdWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGZpbGxGaWVsZCh0eXBlLCBmaWVsZCwgZGF0YSwgc2NoZW1hRmllbGQpIHtcclxuXHRcdFx0c3dpdGNoICh0eXBlKSB7XHJcblx0XHRcdFx0Y2FzZSBcImlucHV0XCI6XHJcblx0XHRcdFx0XHRmaWVsZC52YWwoZGF0YSlcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJzZWxlY3RcIjpcclxuXHRcdFx0XHRcdHNjaGVtYUZpZWxkLnNlbGVjdG9yLmdldFNldFZhbHVlKCBkYXRhW3NjaGVtYUZpZWxkLnNlbGVjdG9yQ29uZmlnLmtleV0sICBkYXRhW3NjaGVtYUZpZWxkLnNlbGVjdG9yQ29uZmlnLnZhbHVlXSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIFwidGV4dFwiOlxyXG5cdFx0XHRcdFx0ZmllbGQudGV4dChnZXRSZWxhdGVkRGF0YShkYXRhLCBzY2hlbWFGaWVsZC5zb3VyY2UpKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJzbGlkZXJcIjpcclxuXHRcdFx0XHRcdHNjaGVtYUZpZWxkLnNsaWRlci5zZXREYXRhKGRhdGEpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBnZXRSZWxhdGVkRGF0YShvYmplY3QsIHBhdGgpIHtcclxuXHRcdCAgICAgICAgaWYoIXBhdGggfHwgIUFycmF5LmlzQXJyYXkocGF0aCkpXHJcblx0XHQgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xyXG5cclxuXHRcdCAgICAgICAgbGV0IHJlc3VsdCA9IG9iamVjdDtcclxuXHJcblx0XHQgICAgICAgIGZvcihsZXQgZWwgb2YgcGF0aCkge1xyXG5cdFx0ICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0W2VsXSB8fCBcIlwiO1xyXG5cdFx0ICAgICAgICB9XHJcblxyXG5cdFx0ICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG5cdFx0ICAgIH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNob3coKSB7XHJcblx0XHRpZiAodGhpcy5mb3JtLmN1cnJlbnRCbG9jaykge1xyXG5cdFx0XHR0aGlzLmZvcm0uY3VycmVudEJsb2NrLnNob3coKTtcclxuXHRcdFx0dGhpcy5mb3JtLmN1cnJlbnRCbG9jay5wYXJlbnQoKS5zaG93KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5ibG9jay5hZGRDbGFzcyhcInNob3ctYmxvY2tcIik7XHJcblx0fVxyXG5cclxuXHRoaWRlKGNiID0gKCkgPT4ge30pIHtcclxuXHRcdGNvbnN0IGRlbGF5ID0gMTI1O1xyXG5cclxuXHRcdHRoaXMuYmxvY2sucmVtb3ZlQ2xhc3MoXCJzaG93LWJsb2NrXCIpO1xyXG5cdFx0c2V0VGltZW91dChjYiwgZGVsYXkpO1xyXG5cdH1cclxuXHJcblx0Y2xlYXIoKSB7XHJcblx0XHRpZighdGhpcy5mb3JtKVxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHRcclxuXHRcdGZvcihsZXQgdmFsdWUgb2YgdGhpcy5mb3JtLmN1cnJlbnRTY2hlbWEpIHtcclxuXHRcdFx0Y2xlYXJGaWVsZCh2YWx1ZS50eXBlLCAkKHZhbHVlLmZpZWxkKSwgdmFsdWUpXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMudmFsaWRhdGUpXHJcblx0XHRcdHRoaXMucmVtb3ZlRXJyb3JzKCk7XHJcblxyXG5cdFx0dGhpcy5jbG9zZUJsb2NrSW5TdGFjaygpO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNsZWFyRmllbGQodHlwZSwgZmllbGQsIHNjaGVtYSkge1xyXG5cdFx0XHRzd2l0Y2ggKHR5cGUpIHtcclxuXHRcdFx0XHRjYXNlIFwiaW5wdXRcIjpcclxuXHRcdFx0XHRcdGZpZWxkLnZhbChcIlwiKVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcInNlbGVjdFwiOlxyXG5cdFx0XHRcdFx0c2NoZW1hLnNlbGVjdG9yLnNldERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJ0ZXh0XCI6XHJcblx0XHRcdFx0XHRmaWVsZC50ZXh0KFwiXCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcInNsaWRlclwiOlxyXG5cdFx0XHRcdFx0c2NoZW1hLnNsaWRlci5jbGVhcigpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjbGVhckFsbCgpIHtcclxuXHRcdHdoaWxlKHRoaXMuZm9ybVN0YWNrLmxlbmd0aCAhPSAwKVxyXG5cdFx0XHR0aGlzLmNsZWFyKCk7XHJcblxyXG5cdFx0dGhpcy5pbml0aWFsT2JqZWN0ID0gdW5kZWZpbmVkO1xyXG5cdH1cclxuXHJcblx0c2V0RXZlbnQoc3RhdGUsIHRhcmdldCkge1xyXG5cdFx0bGV0IGFjdGl2ZVN0YXRlLFxyXG5cdFx0XHRldmVudExpc3QgPSBuZXcgTWFwKCk7XHJcblxyXG5cdFx0bGV0IGNsb3NlID0gKHN0YXRlKSA9PiB7XHJcblx0XHQgICAgcmV0dXJuIChlKSA9PiB7XHJcblx0XHQgICAgICAgIGlmIChlLmRlbGVnYXRlVGFyZ2V0ID09PSBlLnRhcmdldCkge1xyXG5cdFx0ICAgICAgICBcdGlmICggc3RhdGUgPT0gXCJzdWNjZXNcIiAmJiAhdGhpcy5zdWJtaXQoKSkgeyBcclxuXHRcdCAgICAgICAgICAgICAgICByZXR1cm47XHJcblx0XHQgICAgICAgICAgICB9XHJcblxyXG5cdFx0ICAgICAgICAgICAgaWYgKGFjdGl2ZVN0YXRlKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIGV2ZW50TGlzdCkge1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICBrZXkub2ZmKFwiY2xpY2tcIiwgdmFsdWUpO1xyXG5cdFx0ICAgICAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgICAgICBcclxuXHRcdCAgICAgICAgICAgICAgICBldmVudExpc3QuY2xlYXIoKTtcclxuXHRcdCAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKCkgPT4geyB0aGlzLmNsZWFyQWxsKCk7IH0pO1xyXG5cdFx0ICAgICAgICAgICAgICAgIGFjdGl2ZVN0YXRlID0gZmFsc2U7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICB9XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCByZXN1bHQgPSAoc3RhdGUsIHRhcmdldCAgPSB0aGlzLmJsb2NrKSA9PiB7XHJcblx0XHRcdGxldCB0ZW1wID0gY2xvc2Uoc3RhdGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0YWN0aXZlU3RhdGUgPSB0cnVlO1xyXG5cdFx0XHRldmVudExpc3Quc2V0KHRhcmdldCwgdGVtcCk7XHJcblx0XHRcdHRhcmdldC5vbihcImNsaWNrXCIsIHRlbXApO1xyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLnNldEV2ZW50ID0gcmVzdWx0O1xyXG5cdFx0cmVzdWx0KHN0YXRlLCB0YXJnZXQpO1xyXG5cdH1cclxuXHJcblx0c3VibWl0KCkge1xyXG5cdFx0bGV0IG9iaiA9IHRoaXMuZ2V0T2JqZWN0KHRoaXMuZm9ybS5pbml0aWFsT2JqZWN0KSxcclxuXHRcdFx0b3B0aW9ucyA9IHt9LFxyXG5cdFx0XHRlcXVhbGl0eSxcclxuXHRcdFx0cmVzdWx0O1xyXG5cclxuXHRcdGlmICggdGhpcy5mb3JtLmluaXRpYWxPYmplY3QgJiYgZXF1YWxpdHlPZk9iamVjdHModGhpcy5mb3JtLmluaXRpYWxPYmplY3QsIG9iaiwgdGhpcy5mb3JtLmN1cnJlbnRTY2hlbWEpICkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IobGV0IHZhbHVlIG9mIHRoaXMuZm9ybS5jdXJyZW50U2NoZW1hKSB7XHJcblx0XHRcdGlmICh2YWx1ZS52YWxpZGF0aW9uKVxyXG5cdFx0XHRcdG9wdGlvbnNbdmFsdWUubmFtZV0gPSB2YWx1ZS52YWxpZGF0aW9uO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnZhbGlkYXRlKSB7XHJcblx0XHRcdHJlc3VsdCA9IG5ldyB0aGlzLnZhbGlkYXRlLmZ1bmMoKS52YWxpZGF0ZShvYmosIG9wdGlvbnMpO1xyXG5cclxuXHRcdFx0aWYgKE9iamVjdC5rZXlzKHJlc3VsdCkgPT0gMCkge1xyXG5cdFx0ICAgIFx0dGhpcy5mb3JtLnN1Y2Nlc0NhbGxCYWNrKG51bGwsIG9iaik7XHJcblx0XHRcdH1cclxuXHRcdCAgICBlbHNlIHtcclxuXHRcdCAgICBcdHRoaXMuZXJyb3JIYW5kbGVyKHJlc3VsdCk7XHJcblx0XHQgICAgXHRyZXR1cm4gZmFsc2U7XHJcblx0XHQgICAgfVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5mb3JtLnN1Y2Nlc0NhbGxCYWNrKG51bGwsIG9iaik7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gZXF1YWxpdHlPZk9iamVjdHMobWFpbk9iamVjdCA9IHt9LCBvYmplY3QsIHNjaGVtYSkge1xyXG5cdFx0XHRsZXQgcmVzdWx0ID0gdHJ1ZTtcclxuXHJcblx0XHRcdGZvcihsZXQgZmllbGQgb2Ygc2NoZW1hKSB7XHJcblx0XHRcdFx0c3dpdGNoIChmaWVsZC50eXBlKSB7XHJcblx0XHRcdFx0XHRjYXNlIFwiaW5wdXRcIjpcclxuXHRcdFx0XHRcdFx0cmVzdWx0ICY9IG1haW5PYmplY3RbZmllbGQubmFtZV0gPT0gb2JqZWN0W2ZpZWxkLm5hbWVdO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgXCJzZWxlY3RcIjpcclxuXHRcdFx0XHRcdFx0cmVzdWx0ICY9IG1haW5PYmplY3RbZmllbGQubmFtZV0gJiYgXHJcblx0XHRcdFx0XHRcdFx0bWFpbk9iamVjdFtmaWVsZC5uYW1lXVtmaWVsZC5zZWxlY3RvckNvbmZpZy5rZXldID09IG9iamVjdFtmaWVsZC5uYW1lXTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFwic2xpZGVyXCI6XHJcblx0XHRcdFx0XHRcdHJlc3VsdCAmPSBKU09OLnN0cmluZ2lmeShtYWluT2JqZWN0W2ZpZWxkLm5hbWVdKSA9PT0gSlNPTi5zdHJpbmdpZnkob2JqZWN0W2ZpZWxkLm5hbWVdKTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiByZXN1bHQ7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRPYmplY3Qob2JqID0ge30pIHtcclxuXHRcdGxldCB0ZW1wID0gSlNPTi5wYXJzZSggSlNPTi5zdHJpbmdpZnkob2JqKSApOyBcclxuXHRcdFxyXG5cdFx0Zm9yKGxldCB2YWx1ZSBvZiB0aGlzLmZvcm0uY3VycmVudFNjaGVtYSkge1xyXG5cdFx0XHRsZXQgdmFsID0gZ2V0RmllbGQodmFsdWUudHlwZSwgJCh2YWx1ZS5maWVsZCksIHZhbHVlKTtcclxuXHJcblx0XHRcdGlmICh2YWwgIT09IHVuZGVmaW5lZClcclxuXHRcdFx0XHR0ZW1wW3ZhbHVlLm5hbWVdID0gdmFsO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0ZW1wO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGdldEZpZWxkKHR5cGUsIGZpZWxkLCBzY2hlbWEpIHtcclxuXHRcdFx0c3dpdGNoICh0eXBlKSB7XHJcblx0XHRcdFx0Y2FzZSBcImlucHV0XCI6XHJcblx0XHRcdFx0XHRyZXR1cm4gZmllbGQudmFsKClcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJzZWxlY3RcIjpcclxuXHRcdFx0XHRcdHJldHVybiBzY2hlbWEuc2VsZWN0b3IuZ2V0U2V0VmFsdWUoKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJzbGlkZXJcIjpcclxuXHRcdFx0XHRcdHJldHVybiBzY2hlbWEuc2xpZGVyLmdldERhdGEoKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZXJyb3JIYW5kbGVyKGVycm9yKSB7IFxyXG5cdFx0Zm9yKGxldCB2YWx1ZSBvZiB0aGlzLmZvcm0uY3VycmVudFNjaGVtYSkge1xyXG5cdFx0XHRpZihlcnJvclt2YWx1ZS5uYW1lXSlcclxuXHRcdFx0XHR0aGlzLnNldEVycm9yKCAkKHZhbHVlLmZpZWxkKSwgICQodmFsdWUuZmllbGQpLnNpYmxpbmdzKFwiLnBvcHVwLWZvcm1fZXJyb3ItYmxvY2tcIiksIHZhbHVlLnR5cGUpO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0dGhpcy5yZW1vdmVFcnJvciggJCh2YWx1ZS5maWVsZCksICAkKHZhbHVlLmZpZWxkKS5zaWJsaW5ncyhcIi5wb3B1cC1mb3JtX2Vycm9yLWJsb2NrXCIpLCB2YWx1ZS50eXBlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldEVycm9yKGZpZWxkLCBlcnJvckJsb2NrLCB0eXBlKSB7XHJcblx0XHRmaWVsZC5hZGRDbGFzcyhcInBvcHVwLWZvcm1fZXJyb3JcIik7XHJcblx0XHRlcnJvckJsb2NrLmFkZENsYXNzKFwic2hvdy1ibG9ja1wiKTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZUVycm9yKGZpZWxkLCBlcnJvckJsb2NrLCB0eXBlKSB7IFxyXG5cdFx0ZmllbGQucmVtb3ZlQ2xhc3MoXCJwb3B1cC1mb3JtX2Vycm9yXCIpO1xyXG5cdFx0ZXJyb3JCbG9jay5yZW1vdmVDbGFzcyhcInNob3ctYmxvY2tcIik7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVFcnJvcnMoKSB7XHJcblx0XHRmb3IobGV0IHZhbHVlIG9mIHRoaXMuZm9ybS5jdXJyZW50U2NoZW1hKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlRXJyb3IoJCh2YWx1ZS5maWVsZCksICQodmFsdWUuZmllbGQpLnNpYmxpbmdzKFwiLnBvcHVwLWZvcm1fZXJyb3ItYmxvY2tcIiksIHZhbHVlLnR5cGUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y3JlYXRlTmVzdGVkRm9ybSgpIHsgXHJcblx0XHRsZXQgaHRtbCA9IGBcclxuXHRcdFx0PGRpdiBjbGFzcz1cInBvcHVwLWZvcm1fbmVzdGVkLWNvbnRhaW5lci1oZWFkZXJcIj5cclxuXHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9wdXAtZm9ybV9uZXN0ZWQtY29udGFpbmVyLWJhY2tcIiBkYXRhLWFjdGlvbj1cInJldHVyblwiPlxyXG5cdCAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWFycm93LWxlZnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcblx0ICAgICAgICAgICAgPC9kaXY+XHJcblx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvcHVwLWZvcm1fbmVzdGVkLWNvbnRhaW5lci1oZWFkZXItdGl0bGVcIj48L2Rpdj5cclxuXHQgICAgICAgIDwvZGl2PmA7XHJcblxyXG5cdFx0Zm9yKGxldCBlbGVtZW50IG9mIHRoaXMubmVzdGVkRWxlbWVudHMpIHtcclxuXHRcdFx0ZWxlbWVudC5ET00gPSB7fTtcclxuXHRcdFx0ZWxlbWVudC5ET00uYmxvY2sgPSAkKGVsZW1lbnQuYmxvY2spO1xyXG5cdFx0XHRlbGVtZW50LkRPTS5jb250YWluZXIgPSBlbGVtZW50LkRPTS5ibG9jay5wYXJlbnQoKTtcclxuXHJcblx0XHRcdGxldCBoZWFkZXIgPSAkKGh0bWwpO1xyXG5cdFx0XHRlbGVtZW50LkRPTS5jb250YWluZXIucHJlcGVuZChoZWFkZXIpO1xyXG5cclxuXHRcdFx0ZWxlbWVudC5ET00ucmV0dXJuID0gaGVhZGVyLmZpbmQoXCJkaXZbZGF0YS1hY3Rpb249J3JldHVybiddXCIpO1xyXG5cdFx0XHRlbGVtZW50LkRPTS50aXRsZSA9IGhlYWRlci5maW5kKFwiLnBvcHVwLWZvcm1fbmVzdGVkLWNvbnRhaW5lci1oZWFkZXItdGl0bGVcIik7XHJcblx0XHRcdGVsZW1lbnQuRE9NLmxvYWRpbmcgPSBlbGVtZW50LkRPTS5ibG9jay5maW5kKFwiLnBvcHVwLWZvcm1fYm9keS1jb250YWluZXItd3JhcHBlci1sb2FkaW5nXCIpO1xyXG5cdFx0XHRlbGVtZW50LkRPTS5zdWNjZXMgPSAkKGVsZW1lbnQuc3VjY2VzKTtcclxuXHJcblx0XHRcdGVsZW1lbnQuRE9NLnN1Y2Nlcy5vbihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0XHRpZih0aGlzLmZvcm0uY3VycmVudEJsb2NrID09PSBlbGVtZW50LkRPTSlcclxuXHRcdFx0XHRcdHRoaXMuc3VibWl0KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b3Blbk5lc3RlZEVsZW1lbnQoeyBuZXN0ZWRFbGVtZW50OiB7aWQgLCB0aXRsZX0sIHNlcnZlclJlcXVlc3QgfSwgaW5pdGlhbENCID0gKCkgPT4ge30pIHtcclxuXHRcdGxldCByZXF1ZXN0T2JqZWN0LFxyXG5cdFx0Y2xvc2UgPSAoZSkgPT4ge1xyXG5cdFx0XHRpZiAocmVxdWVzdE9iamVjdClcclxuXHRcdFx0XHRyZXF1ZXN0T2JqZWN0LmNhbmNlbCgpO1xyXG5cclxuXHRcdFx0dGhpcy5mb3JtLmN1cnJlbnRCbG9jay5jbG9zZUZ1bmN0aW9uID0gdW5kZWZpbmVkO1xyXG5cdFx0XHR0aGlzLmZvcm0uY3VycmVudEJsb2NrLmxvYWRpbmcucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoZSlcclxuXHRcdFx0XHR0aGlzLmNsZWFyKCk7XHJcblx0XHR9LFxyXG5cdFx0Y2IgPSAoZXJyb3IsIHJlc3VsdCkgPT4ge1xyXG5cdFx0XHRpZiAoZXJyb3IpXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdFx0Y2xvc2UodHJ1ZSk7XHJcblx0XHRcdGluaXRpYWxDQihlcnJvciwgcmVzdWx0KTtcclxuXHRcdH0sXHJcblx0XHRjYWxsQmFjayA9ICgpID0+IHtcclxuXHRcdFx0aWYgKHNlcnZlclJlcXVlc3QpXHJcblx0XHRcdFx0cmV0dXJuIChlcnJvciwgcmVzdWx0KSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoZXJyb3IpXHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHJcblx0XHRcdFx0XHR0aGlzLmZvcm0uY3VycmVudEJsb2NrLmxvYWRpbmcuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcblx0XHRcdFx0XHRyZXF1ZXN0T2JqZWN0ID0gdGhpcy5jb25uZWN0b3IuY3VzdG9tRXZlbnRSZXF1ZXN0KHNlcnZlclJlcXVlc3QuZXZlbnROYW1lLCB7XHJcblx0XHRcdFx0XHRcdG9iamVjdElkOiB0aGlzLmluaXRpYWxPYmplY3QuX2lkLCBcclxuXHRcdFx0XHRcdFx0Y3JlYXRlZE9iamVjdDogcmVzdWx0XHJcblx0XHRcdFx0XHR9LCBjYik7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBjYjtcclxuXHRcdH07XHJcblxyXG5cdFx0bGV0IGJsb2NrO1xyXG5cclxuXHRcdGZvcihsZXQgZWxlbWVudCBvZiB0aGlzLm5lc3RlZEVsZW1lbnRzKVxyXG5cdFx0XHRpZiAoZWxlbWVudC5pZCA9PT0gaWQpXHJcblx0XHRcdFx0YmxvY2sgPSBlbGVtZW50O1xyXG5cclxuXHRcdGlmICghYmxvY2spXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHRibG9jay5ET00udGl0bGUudGV4dCh0aXRsZSlcclxuXHRcdGJsb2NrLkRPTS5jbG9zZUZ1bmN0aW9uID0gY2xvc2U7XHJcblx0XHR0aGlzLmZvcm1TdGFjay5wdXNoKHtcclxuXHRcdFx0Y3VycmVudEJsb2NrOiBibG9jay5ET00sXHJcblx0XHRcdHN1Y2Nlc0NhbGxCYWNrOiBjYWxsQmFjaygpLFxyXG5cdFx0XHRjdXJyZW50U2NoZW1hOiBibG9jay5zY2hlbWFcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuc2hvd05lc3RlZEVsZW1lbnQoKVxyXG5cdFx0XHJcblx0XHRibG9jay5ET00ucmV0dXJuLm9uZShcImNsaWNrXCIsIGNsb3NlKTtcclxuXHR9XHJcblxyXG5cdHNob3dOZXN0ZWRFbGVtZW50KCkge1xyXG5cdFx0bGV0IGN1cnJlbnQgPSB0aGlzLmZvcm0uY3VycmVudEJsb2NrLmNvbnRhaW5lcixcclxuXHRcdFx0cGFyZW50ID0gdGhpcy5wcmV2aW91c0Zvcm0uY3VycmVudEJsb2NrLmNvbnRhaW5lciBcclxuXHRcdFx0XHQ/IHRoaXMucHJldmlvdXNGb3JtLmN1cnJlbnRCbG9jay5jb250YWluZXIgXHJcblx0XHRcdFx0OiB0aGlzLnByZXZpb3VzRm9ybS5jdXJyZW50QmxvY2sucGFyZW50KCk7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0cGFyZW50LmFkZENsYXNzKFwiaGlkZVwiKTtcclxuXHRcdGN1cnJlbnQuc2hvdygpO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRwYXJlbnQuaGlkZSgpO1xyXG5cdFx0fSwgNTAwKTtcclxuXHR9XHJcblxyXG5cdGhpZGVOZXN0ZWRFbGVtZW50KCkgeyBcclxuXHRcdGxldCBjdXJyZW50ID0gdGhpcy5mb3JtLmN1cnJlbnRCbG9jay5jb250YWluZXIsXHJcblx0XHRcdHBhcmVudCA9IHRoaXMucHJldmlvdXNGb3JtLmN1cnJlbnRCbG9jay5jb250YWluZXIgXHJcblx0XHRcdFx0PyB0aGlzLnByZXZpb3VzRm9ybS5jdXJyZW50QmxvY2suY29udGFpbmVyIFxyXG5cdFx0XHRcdDogdGhpcy5wcmV2aW91c0Zvcm0uY3VycmVudEJsb2NrLnBhcmVudCgpO1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdHBhcmVudC5zaG93KCk7XHJcblx0XHRcclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRwYXJlbnQucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xyXG5cdFx0fSwgMCk7XHJcblxyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdGN1cnJlbnQuaGlkZSgpO1xyXG5cdFx0fSwgNTAwKTtcclxuXHR9XHJcblxyXG5cdGNsb3NlTmVzdGVkRWxlbWVudCgpIHtcclxuXHRcdGlmICh0aGlzLmZvcm0uY3VycmVudEJsb2NrICYmIHRoaXMuZm9ybS5jdXJyZW50QmxvY2suY29udGFpbmVyKVxyXG5cdFx0XHR0aGlzLmhpZGVOZXN0ZWRFbGVtZW50KCk7XHJcblx0XHRlbHNlIGlmICh0aGlzLmZvcm0uY3VycmVudEJsb2NrKVxyXG5cdFx0XHR0aGlzLmZvcm0uY3VycmVudEJsb2NrLmhpZGUoKTtcclxuXHJcblx0XHR0aGlzLmZvcm1TdGFjay5wb3AoKTtcclxuXHR9XHJcblxyXG5cdGNsb3NlQmxvY2tJblN0YWNrKCkge1xyXG5cdFx0aWYgKHRoaXMuZm9ybS5jdXJyZW50QmxvY2sgJiYgdGhpcy5mb3JtLmN1cnJlbnRCbG9jay5jbG9zZUZ1bmN0aW9uKSB7XHJcblx0XHRcdHRoaXMuZm9ybS5jdXJyZW50QmxvY2suY2xvc2VGdW5jdGlvbigpO1xyXG5cdFx0XHR0aGlzLmZvcm0uY3VycmVudEJsb2NrLnJldHVybi5vZmYoXCJjbGlja1wiLCB0aGlzLmZvcm0uY3VycmVudEJsb2NrLmNsb3NlRnVuY3Rpb24pO1xyXG5cdFx0fVxyXG4gXHJcblx0XHR0aGlzLmNsb3NlTmVzdGVkRWxlbWVudCgpO1xyXG5cdH1cclxufSJdfQ==

"use strict";var form=new authorisation({block:$("#authorisationForm")});function authorisation(r){var a=r.block,o={mail:a.find("#mailInput"),password:a.find("#passwordInput")},i={mail:a.find("#mailError"),password:a.find("#passwordError")};function n(){var r={mail:o.mail.val(),password:o.password.val()},a=(new formValidator).validate(r,{mail:["required"],password:["required"]});return 0==Object.keys(a)?r:(function(r){for(var a in e(),r)a in o&&o[a].addClass("authorisation__form-error"),a in i&&t(i[a],localization["validate_"+r[a][0]])}(a),!1)}function t(r,a){r.text(a).parent().show()}function s(){var r=n();0!=r&&$.ajax({type:"POST",url:"/authorisation/login",data:r,asinc:!0,success:function(r){r.error?function(r){switch(e(),r.code){case 103:t(i.mail,r.message);break;default:throw new Error("POST ERROR: \n ".concat(r.message))}}(r.error):location.reload()}})}function e(){a.find(".authorisation__form-error").removeClass("authorisation__form-error"),a.find(".authorisation__error").hide()}a.submit(function(r){s(),r.preventDefault()})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3BhZ2UvYXV0aG9yaXNhdGlvbi5qcyJdLCJuYW1lcyI6WyJmb3JtIiwiYXV0aG9yaXNhdGlvbiIsImJsb2NrIiwiJCIsIm9wdGlvbnMiLCJmaWVsZHMiLCJmaW5kIiwicGFzc3dvcmQiLCJtYWlsIiwiZXJyb3JGaWVsZHMiLCJzdWJtaXQiLCJkYXRhIiwidmFsIiwicmVzdWx0IiwiZm9ybVZhbGlkYXRvciIsInZhbGlkYXRlIiwib3B0aW9uIiwiT2JqZWN0Iiwia2V5cyIsImVycm9ycyIsImtleSIsImNsZWFyIiwic2V0RXJyb3JNZXNzYWdlIiwiYWRkQ2xhc3MiLCJsb2NhbGl6YXRpb24iLCJzZXRFcnJvcnMiLCJlcnJvckhhbmRsZXIiLCJlcnJvciIsIm1lc3NhZ2UiLCJ0ZXh0IiwicGFyZW50Iiwic2hvdyIsInZhbHVlcyIsInR5cGUiLCJhamF4IiwidXJsIiwibG9jYXRpb24iLCJhc2luYyIsInN1Y2Nlc3MiLCJhbnN3ZXIiLCJjb2RlIiwiRXJyb3IiLCJjb25jYXQiLCJyZWxvYWQiLCJsb2dpbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJyZW1vdmVDbGFzcyIsImhpZGUiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLEtBQU8sSUFBSUMsY0FBYyxDQUMzQkMsTUFBT0MsRUFBRSx3QkFEa0IsU0FBN0JGLGNBQUFHLEdBS0UsSUFBSUYsRUFBUUUsRUFBUUYsTUFEdEJHLEVBQVNKLENBQ0hDLEtBQUtBLEVBQUdFLEtBQVFGLGNBQ2xCRyxTQUFTSCxFQUFBSSxLQUFBLG1CQUVQQyxFQUFVTCxDQUhkTSxLQUFBTixFQUFBSSxLQUFBLGNBS0VHLFNBQUFBLEVBQWNILEtBQUEsbUJBTWhCLFNBQVNJLElBQVQsSUFBQUMsRUFBU0QsQ0FDSEMsS0FBSU4sRUFBR0csS0FBQUksTUFDUEosU0FBWUgsRUFBTU8sU0FEWEEsT0FBWEMsR0FBQSxJQUFBQyxlQUFBQyxTQUFBSixFQUFBLENBSUVLLEtBQU0sQ0FBQSxZQUNKUixTQUFPLENBQUEsY0FLWCxPQUEyQixHQUF2QlMsT0FBT0MsS0FBS0wsR0FJVEYsR0FNUCxTQUFnQlEsR0FJZCxJQUFBLElBQU9DLEtBSFBDLElBR1daLEVBQ1RhLEtBQUFBLEdBQ0RqQixFQUFBZSxHQUFBRyxTQUFBLDZCQUVKSCxLQUFBWCxHQUhLYSxFQUFnQmIsRUFBWVcsR0FBTUksYUFBYSxZQUFjTCxFQUFPQyxHQUFLLEtBWjNFSyxDQUFVWixJQUlMWSxHQWlCVCxTQUFTQyxFQUFhQyxFQUFPQyxHQUMzQlAsRUFBS1EsS0FBQUQsR0FBQUUsU0FBQUMsT0FnQkwsU0FBSUMsSUFHSjdCLElBQ0U4QixFQUFNdkIsSUFERCxHQUdMQyxHQUdFUixFQUFBK0IsS0FBQSxDQUNFUixLQUFBQSxPQUNEUyxJQVJFLHVCQVNEQyxLQUFBQSxFQUNEQyxPQUFBLEVBQ0ZDLFFBQUEsU0FBQUMsR0FYSEEsRUFBQVosTUFoQkUsU0FBQUEsR0FERixPQUVJTCxJQUZJSyxFQUFNYSxNQUlaLEtBQUEsSUFDRWxCLEVBQU1iLEVBQUFELEtBQUFtQixFQUFBQyxTQUNOLE1BTkosUUFRRCxNQUFBLElBQUFhLE1BQUEsa0JBQUFDLE9BQUFmLEVBQUFDLFdBc0JBRixDQUFBYSxFQUFBWixPQUVEUyxTQUFpQk8sWUFNZkMsU0FBS3ZCLElBQ0x3QixFQUFNQyxLQUFBQSw4QkFBTkMsWUFBQSw2QkFGRjdDLEVBQUFJLEtBQUEseUJBQUEwQyxPQUFBOUMsRUFBTVEsT0FBTyxTQUFVbUMsR0FDckJELElBQ0FDLEVBQU1DIiwiZmlsZSI6ImpzL3BhZ2UvYXV0aG9yaXNhdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBmb3JtID0gbmV3IGF1dGhvcmlzYXRpb24oe1xyXG4gIGJsb2NrOiAkKCcjYXV0aG9yaXNhdGlvbkZvcm0nKVxyXG59KVxyXG5cclxuZnVuY3Rpb24gYXV0aG9yaXNhdGlvbihvcHRpb25zKSB7XHJcbiAgbGV0IGJsb2NrID0gb3B0aW9ucy5ibG9jayxcclxuICAgIGZpZWxkcyA9IHtcclxuICAgICAgbWFpbDogYmxvY2suZmluZCgnI21haWxJbnB1dCcpLFxyXG4gICAgICBwYXNzd29yZDogYmxvY2suZmluZCgnI3Bhc3N3b3JkSW5wdXQnKVxyXG4gICAgfSxcclxuICAgIGVycm9yRmllbGRzID0ge1xyXG4gICAgICBtYWlsOiBibG9jay5maW5kKCcjbWFpbEVycm9yJyksXHJcbiAgICAgIHBhc3N3b3JkOiBibG9jay5maW5kKCcjcGFzc3dvcmRFcnJvcicpXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgZnVuY3Rpb24gc3VibWl0KCkge1xyXG4gICAgbGV0IGRhdGEgPSB7XHJcbiAgICAgICAgbWFpbDogZmllbGRzLm1haWwudmFsKCksXHJcbiAgICAgICAgcGFzc3dvcmQ6IGZpZWxkcy5wYXNzd29yZC52YWwoKVxyXG4gICAgICB9LFxyXG4gICAgICBvcHRpb24gPSB7XHJcbiAgICAgICAgbWFpbDogW1wicmVxdWlyZWRcIl0sXHJcbiAgICAgICAgcGFzc3dvcmQ6IFtcInJlcXVpcmVkXCJdXHJcbiAgICAgIH0sXHJcbiAgICAgIHJlc3VsdCA9IG5ldyBmb3JtVmFsaWRhdG9yKCkudmFsaWRhdGUoZGF0YSwgb3B0aW9uKTtcclxuXHJcbiAgICBpZiAoT2JqZWN0LmtleXMocmVzdWx0KSA9PSAwKVxyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIGVsc2VcclxuICAgICAgc2V0RXJyb3JzKHJlc3VsdCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRFcnJvcnMoZXJyb3JzKSB7XHJcbiAgICBjbGVhcigpO1xyXG5cclxuICAgIGZvciAobGV0IGtleSBpbiBlcnJvcnMpIHtcclxuICAgICAgaWYgKGtleSBpbiBmaWVsZHMpXHJcbiAgICAgICAgZmllbGRzW2tleV0uYWRkQ2xhc3MoJ2F1dGhvcmlzYXRpb25fX2Zvcm0tZXJyb3InKTtcclxuXHJcbiAgICAgIGlmIChrZXkgaW4gZXJyb3JGaWVsZHMpIHtcclxuICAgICAgICBzZXRFcnJvck1lc3NhZ2UoZXJyb3JGaWVsZHNba2V5XSwgbG9jYWxpemF0aW9uW1widmFsaWRhdGVfXCIgKyBlcnJvcnNba2V5XVswXV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRFcnJvck1lc3NhZ2UoZmllbGQsIG1lc3NhZ2UpIHtcclxuICAgIGZpZWxkLnRleHQobWVzc2FnZSkucGFyZW50KCkuc2hvdygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycm9yKSB7XHJcbiAgICBjbGVhcigpO1xyXG5cclxuICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xyXG4gICAgICBjYXNlIDEwMzpcclxuICAgICAgICBzZXRFcnJvck1lc3NhZ2UoZXJyb3JGaWVsZHMubWFpbCwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQT1NUIEVSUk9SOiBcXG4gJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbG9naW4oKSB7XHJcbiAgICBjb25zdCBwYXRoID0gJy9hdXRob3Jpc2F0aW9uL2xvZ2luJztcclxuICAgIGxldCB2YWx1ZXMgPSBzdWJtaXQoKTtcclxuXHJcbiAgICBpZiAodmFsdWVzID09IGZhbHNlKVxyXG4gICAgICByZXR1cm47XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICB1cmw6IHBhdGgsXHJcbiAgICAgIGRhdGE6ICh2YWx1ZXMpLFxyXG4gICAgICBhc2luYzogdHJ1ZSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24oYW5zd2VyKSB7XHJcbiAgICAgICAgaWYgKGFuc3dlci5lcnJvcikge1xyXG4gICAgICAgICAgZXJyb3JIYW5kbGVyKGFuc3dlci5lcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbGVhcigpIHtcclxuICAgIGJsb2NrLmZpbmQoJy5hdXRob3Jpc2F0aW9uX19mb3JtLWVycm9yJykucmVtb3ZlQ2xhc3MoXCJhdXRob3Jpc2F0aW9uX19mb3JtLWVycm9yXCIpO1xyXG4gICAgYmxvY2suZmluZCgnLmF1dGhvcmlzYXRpb25fX2Vycm9yJykuaGlkZSgpO1xyXG4gIH1cclxuXHJcbiAgYmxvY2suc3VibWl0KGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgbG9naW4oKTtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn0iXX0=
